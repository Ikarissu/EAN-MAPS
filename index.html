<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EAN-MAPS</title>
    <!-- LEAFTLET CSS -->
    <link rel="stylesheet" href="dist/leaflet.css" />
    <!-- BOXICONS CSS -->
    <link rel="stylesheet" href="assets/boxicons3.0/fonts/basic/boxicons.min.css" />
    <!-- SELECT2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css">
    <!-- CUSTOM CSS -->
    <!-- Menús izquierdo y derecho -->
    <link rel="stylesheet" href="assets/css/leftAndRightMenu.css" />
    <!-- Mapa y fuente -->
    <link rel="stylesheet" href="assets/css/mapAndFont.css" />
    <!-- Modal de generación PDF -->
    <link rel="stylesheet" href="assets/css/pdfModal.css" />
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />

</head>

<body>
    <aside class="left-menu" id="left-menu" aria-expanded="true">
        <div class="left-menu-title">
            <i class="bx bx-location-pin left-menu-toggle" role="button" aria-label="Abrir/cerrar menú izquierdo"></i>
            <label for="mode">EAN-MAPS</label>
        </div>
        <nav class="left-menu-options">
            <div class="left-menu-item">
                <i class="bx bx-trip"></i>
                <label for="mode">Modalidad</label>
            </div>
            <div class="left-menu-item">
                <i class="bx bx-plane-alt"></i>
                <button id="plane">Aérea</button>
            </div>
            <div class="left-menu-item">
                <i class="bx bx-car"></i>
                <button id="vehicle">Terrestre</button>
            </div>
            <div class="left-menu-item">
                <i class="bx bx-eraser"></i>
                <button id="clear-mode" type="button">Limpiar selección</button>
            </div>
            <div class="left-menu-item">
                <i class="bx bx-globe"></i>
                <label for="timezone">Zona horaria</label>
            </div>
            <div class="left-menu-item">
                <i class="bx bx-clock-dashed-half"></i>
                <select id="timezone" name="timezone"></select>
            </div>
            <div class="left-menu-item">
                <i class="bx bx-clock"></i>
                <div id="tz-clock" class="tz-clock"></div>
            </div>
        </nav>
    </aside>
    <aside class="right-menu" id="right-menu" aria-expanded="true">
        <div class="right-menu-title">
            <i class="bx bx-location right-menu-toggle" role="button" aria-label="Abrir/cerrar menú derecho"></i>
            <label for="ubication-log">Ubicaciones buscadas</label>
        </div>
        <div class="right-menu-options">
            <button id="export-all-pdf" type="button" class="export-all-btn">
                Exportar PDF
            </button>
            <div id="distance-list">
                <div class="distance-info empty-distance">
                    Sin búsquedas registradas.
                </div>
            </div>
        </div>
        <div class="distance-pagination">
            <button id="prev-distance" type="button">◀</button>
            <span id="distance-page-indicator">Página 0/1</span>
            <button id="next-distance" type="button">▶</button>
        </div>
    </aside>
    <div id="main-map"></div>

    <div id="export-modal" class="modal-overlay" hidden>
      <div class="modal-content">
        <div class="modal-header">
          <h3>Exportar PDF</h3>
          <button type="button" id="close-export-modal" class="modal-close">✕</button>
        </div>
        <form id="export-filters-form" class="modal-body">
          <label class="modal-field">
            <span>Rango de fechas (opcional)</span>
            <div class="modal-row">
              <input type="date" id="filter-date-from" name="dateFrom">
              <input type="date" id="filter-date-to" name="dateTo">
            </div>
          </label>

          <label class="modal-field">
            <span>Modalidad</span>
            <select id="filter-mode" name="mode">
              <option value="all">Todas</option>
              <option value="plane">Aérea</option>
              <option value="vehicle">Terrestre</option>
            </select>
          </label>

          <div class="modal-actions">
            <button type="button" id="cancel-export-modal" class="modal-secondary">Cancelar</button>
            <button type="submit" class="modal-primary">Generar PDF</button>
          </div>
        </form>
      </div>
    </div>

</body>
<!-- LEAFTLET JS -->
<script src="dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
<!-- JQUERY -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
<!-- SELECT2 JS -->
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<!-- PDFMAKE JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
<!-- CUSTOM JS -->
<!-- Zonas horarias disponibles para seleccionar (en base a la hora del dispositivo) -->
<script src="assets/js/timezoneOptions.js"></script>
<!-- Inicialización de Select2 para zonas horarias -->
<script src="assets/js/select2Gmt.js"></script>
<!-- Guardar y cargar registros de distancia con localStorage -->
<script src="assets/js/saveAndLoadDistanceRecords.js"></script>
<!-- Inicialización del mapa con Leaflet -->
<script src="assets/js/initializeMap.js"></script>
<!-- Carga y despliegue de aeropuertos -->
<script src="assets/js/airportsLayer.js"></script>
<!-- Estado global de modalidades -->
<script src="assets/js/state.js"></script>
<!-- Referencias a elementos DOM (modalidad, zona horaria, reloj, paginación) -->
<script src="assets/js/domRefs.js"></script>
<!-- Renderizar la lista de distancias calculadas y mostrar en pantalla -->
<script src="assets/js/renderDistanceList.js"></script>
<!-- Controles de paginación de la lista de distancias -->
<script src="assets/js/paginationControls.js"></script>
<!-- Utilidades de zona horaria -->
<script src="assets/js/timezoneUtils.js"></script>
<!-- Limpieza de modo activo -->
<script src="assets/js/mapCleanup.js"></script>
<!-- Modo aéreo (selección A/B y cálculo) -->
<script src="assets/js/planeMode.js"></script>
<!-- Modo terrestre (selección A/B y cálculo) -->
<script src="assets/js/vehicleMode.js"></script>
<!-- Notificaciones -->
<script src="assets/js/notifications.js"></script>
<!-- Inicialización de elementos UI -->
<script src="assets/js/uiHandlers.js"></script>
<!-- Generación de PDF -->
<script src="assets/js/pdfExport.js"></script>
<!-- Redibujar las distancias guardadas -->
<script src="assets/js/reDrawDistanceRecords.js"></script>
<!-- Eventos de los botones de guardar y redibujar ruta -->
<script src="assets/js/distanceListDelegates.js"></script>
<!-- Generación de PDF con todos los registros y según filtro -->
<script src="assets/js/pdfAllExport.js"></script>
<!-- Pliegue/Despliegue de los menús en pantallas pequeñas -->
<script src="assets/js/menuToggle.js"></script>
</html>